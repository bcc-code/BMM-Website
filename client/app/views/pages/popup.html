<!--ADD TRACK TO PLAYLIST-->
<div class="popup" ng-if="trackToPlaylist.id">
    <div class="container">
        <div class="verticalCenter">
            <div id="popup-track-to-playlist" class="container" always click-outside="trackToPlaylist.id=false">

                <div class="exit" ng-click="trackToPlaylist.id=false"></div>

                <b>{{init.translation.options.choosePlaylist}}</b>
                <br><br>

                <ul class="playlist">
                    <li ng-repeat="collection in init.user.track_collections"
                        ng-click="addToPlaylist(collection.id, trackToPlaylist.id, trackToPlaylist.language);
                              trackToPlaylist.id=false;">
                        {{collection.name}}
                    </li>
                </ul>

            </div>
        </div>
    </div>
</div>

<!--ADD TRACKS TO PLAYLIST-->
<div class="popup" ng-if="tracksToPlaylist.length>0">
    <div class="container">
        <div class="verticalCenter">
            <div id="popup-tracks-to-playlist" class="container" always click-outside="tracksToPlaylist.length=0">

                <div class="exit" ng-click="tracksToPlaylist.length=0"></div>

                <b>{{init.translation.options.choosePlaylist}}</b>
                <br><br>

                <ul class="playlist">
                    <li ng-repeat="collection in init.user.track_collections"
                        ng-click="addTracksToPlaylist(collection.id, tracksToPlaylist); tracksToPlaylist.length=0">
                        {{collection.name}}
                    </li>
                </ul>

            </div>
        </div>
    </div>
</div>

<!--PODCAST-->
<div class="popup" ng-if="newPodcast.show">
    <div class="container">
        <div class="verticalCenter">
            <div id="popup-new-podcast" class="container" always click-outside="newPodcast.show=false">

                <div class="exit" ng-click="newPodcast.show=false"></div>

                <b>{{init.translation.options.podcast}}</b>
                <br><br>
                {{init.translation.options.setupPodcast}}
                <br><br>

                <div style="width: 47%; float: left;">
                    <b>{{init.translation.options.chooseLanguage}}</b>
                    <div class="dropdown"
                         style="float: none; margin: 0; display: inline-block">
                        <a class="dropdown-toggle" data-toggle="dropdown" ng-style="{opacity: allLanguages ? '0.3' : '1' }">
                            <div class="flags-{{init.podcastLanguage}}"></div>
                            {{init.podcastLanguage | _languageCode}}</a>
                        <ul class="dropdown-menu" style="margin-left: 0!important">
                            <li ng-repeat="lang in init.root.languages">
                                <a class="flags-{{lang}}"
                                   ng-click="$parent.init.podcastLanguage=lang">{{lang | _languageCode}}</a>
                            </li>
                        </ul>
                    </div>
                </div>

                <div style="width: 47%; float: right;">
                    <b>{{init.translation.options.includeLatest}}</b>
                    <select ng-model="fileRestriction" ng-init="fileRestriction=20">
                        <option value="10">10 {{init.translation.options.tracks}}</option>
                        <option value="20" selected>20 {{init.translation.options.tracks}}</option>
                        <option value="50">50 {{init.translation.options.tracks}}</option>
                        <option value="100">100 {{init.translation.options.tracks}}</option>
                        <option value="250">250 {{init.translation.options.tracks}}</option>
                        <option value="500">500 {{init.translation.options.tracks}}</option>
                        <option value="1000">1000 {{init.translation.options.tracks}}</option>
                    </select>
                </div>

                <div style="width: 100%; margin-top: 1em; float: left;">
                    <span ng-click="allLanguages=!allLanguages;">
                        <b>{{init.translation.playlist.allLanguages}}</b>
                    </span><br>
                    <input type="checkbox" ng-model="allLanguages">
                </div>

                <div style="width: 100%; margin-top: 1em; float: left;">
                    <b>{{init.translation.options.copyUrl}}</b>
                    <input style="width: 100%; border: .1em solid gray;padding: .5em;"
                           type="text" value="{{newPodcast.link}}language={{allLanguages ? '' : init.podcastLanguage}}&size={{fileRestriction}}&hash={{podcastHash}}">
                </div>

            </div>
        </div>
    </div>
</div>

<!--SHARE-->
<div class="popup" ng-if="$root.share.show">
    <div class="container">
        <div class="verticalCenter">
            <div id="popup-share" class="container" always click-outside="$root.share.show=false">

                <div class="exit" ng-click="$root.share.show=false"></div>

                <b>{{$root.init.translation.options.share}}</b>

                <div style="width: 100%; margin-top: 1em; float: left;">
                    <b>{{$root.init.translation.options.copyLink}}</b>
                    <input style="width: 100%; border: .1em solid gray;padding: .5em;"
                           type="text" value="{{$root.share.link}}">
                </div>

            </div>
        </div>
    </div>
</div>

<!--PUSH MESSAGE-->
<div class="popup" ng-if="pushMessage.show">
    <div class="container">
        <div class="verticalCenter">
            <div id="popup-push-message" class="container" click-outside="pushMessage.show=false">

                <div class="exit" ng-click="pushMessage.show=false"></div>

                <b>{{pushMessage.message.title}}</b>

                <p>
                    {{pushMessage.message.message}}
                </p>

            </div>
        </div>
    </div>
</div>

<!--SETTINGS-->
<div class="popup" ng-if="settings.show">
    <div class="container">
        <div class="verticalCenter">
            <div id="popup-settings" class="container" click-outside="closeLanguageSettingsPopup()">

                <div ng-init="contentLanguagesChanged = false" class="exit" ng-click="closeLanguageSettingsPopup()"></div>

                 <uib-tabset class="tabbable">
                    <uib-tab heading="{{init.translation.options.websiteLanguage}}">
                        <div style="width: 100%;float: left; margin-top: 1em;">
                            <div class="dropdown">
                                <a class="dropdown-toggle" data-toggle="dropdown">
                                    <div class="flags-{{init.websiteLanguage}}"></div>
                                    {{init.websiteLanguage | _languageCode}}</a>
                                <ul class="dropdown-menu">
                                    <li ng-repeat="lang in init.translations.available"
                                        ng-click="setWebsiteLanguage(lang);">
                                        <a class="flags-{{lang}}">{{lang | _languageCode}}</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </uib-tab>
                    <uib-tab heading="{{init.translation.options.contentLanguages}}">
                        <div style="width: 100%;">
                            <b class="choose-language">{{init.translation.options.chooseLanguages}}</b>
                            <ul ui-sortable="sortableOptions" ng-model="init.contentLanguages">
                              <li ng-repeat="language in init.contentLanguages" class="language_element">
                                <div style="width:70%" class="dropdown">
                                    <a class="dropdown-toggle" data-toggle="dropdown">
                                        <div class="flags-{{language}}"></div>
                                        {{language | _languageCode}}
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li ng-repeat="lang in init.root.languages | filter : exceptSelected"
                                            ng-click="updateContentLanguage(lang, language)">
                                            <a class="flags-{{lang}}">{{lang | _languageCode}}</a>
                                        </li>
                                    </ul>
                                </div>
                                <a class="btn_remove" ng-class="{invisible: $index == 0}" ng-click="removeContentLanguage($index)"><span class="glyphicon glyphicon-remove"></span></a>
                                <a class="btn_sort sort_handle"><span class="glyphicon glyphicon-sort"></span></a>
                            </li>
                            </ul>
                            <div ng-click="addLanguage();setLanguagesChanged();" class="languages-add">
                                {{init.translation.options.addLanguage}}
                            </div>
                        </div>
                    </uib-tab>
                </uib-tabset>
            </div>
        </div>
    </div>
</div>

<!--MORE INFO FOR A TRACK-->
<div class="popup" ng-if="$root.trackInfo.show">
    <div class="container">
        <div class="verticalCenter">
            <div id="popup-track-info" class="container" click-outside="$root.trackInfo.show=false">

                <div class="exit" ng-click="$root.trackInfo.show=false"></div>

                <b style="float: left; width: 100%;">{{$root.trackInfo.track.title}}</b><br><br>

                <b>{{init.translation.track.recordedDate}}</b><br>
                    {{$root.trackInfo.track.date | _locals:init.translation['iso-639-1']:'{d}. {SHORTMONTH} {yyyy} - {HH}:{mm}'}}<br><br>

                <b>{{init.translation.track.duration}}</b><br>
                    <span>
                        {{$root.trackInfo.track.duration | _time}}
                    </span><br><br>

                <b>{{init.translation.track.album}}</b><br>
                    <span class="link"
                          ng-click="go('/album/'+$root.trackInfo.track.raw.parent_id); $root.trackInfo.show=false;">
                        {{$root.trackInfo.track.albumTitle}}
                    </span><br><br>

                <b>{{init.translation.track.artist}}</b><br>
                    <span class="link"
                          ng-repeat="artist in $root.trackInfo.track.interprets"
                       ng-click="go('/playlist/contributor/'+artist.id+'/'+artist.name); $root.trackInfo.show=false;">
                        {{artist.name}}<em ng-hide="$last">,&nbsp</em>
                    </span><br><br>

                <b>{{init.translation.track.lyricist}}</b><br>
                    <span class="link"
                          ng-repeat="lyricist in $root.trackInfo.track.lyricists"
                          ng-click="go('/playlist/contributor/'+lyricist.id+'/'+lyricist.name); $root.trackInfo.show=false;">
                        {{lyricist.name}}<em ng-hide="$last">,&nbsp</em>
                    </span><br><br>

                <b>{{init.translation.track.composer}}</b><br>
                    <span class="link"
                          ng-repeat="composer in $root.trackInfo.track.composers"
                          ng-click="go('/playlist/contributor/'+composer.id+'/'+composer.name); $root.trackInfo.show=false;">
                        {{composer.name}}<em ng-hide="$last">,&nbsp</em>
                    </span><br><br>
                <b>{{init.translation.track.bibleVerse}}</b><br>
                    <span class="link"
                          title="{{reference.timestamp | _time}}"
                          ng-click="play([$root.trackInfo.track], 0, reference.timestamp, reference.name);"
                          ng-repeat="reference in $root.trackInfo.track.bible">
                        {{reference.name}}<em ng-hide="$last">,&nbsp</em>
                    </span><br><br>

            </div>
        </div>
    </div>
</div>